@model BSB.Data.Dto.GroupMoviesDto

@using Microsoft.AspNetCore.Identity
@inject SignInManager<BSB.Data.Entity.MAUser> SignInManager
@inject UserManager<BSB.Data.Entity.MAUser> UserManager

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
 <style>
    body {
      font-family: "Lato", sans-serif;
    }

    .sidenav {
      height: 100%;
      width: 230px;
      position: fixed;
      z-index: 1;
      top: 0;
      left: 0;
      background-color: #181818;
      overflow-x: hidden;
      transition: 0.5s;
      padding-top: 80px;
    }

    .sidenav a {
      padding: 8px 8px 8px 32px;
      text-decoration: none;
      font-size: 25px;
      color: #818181;
      display: block;
      transition: 0.3s;
    }

    .sidenav a:hover {
      color: #f1f1f1;
    }

    .sidenav .closebtn {
      position: absolute;
      top: 0;
      right: 25px;
      font-size: 36px;
      margin-left: 50px;
    }

</style>

    <div id="mySidenav" class="sidenav">
        <a asp-area="" asp-controller="Movies" asp-action="Index" class="closebtn">&times;</a>

                <div style="display: inline-block" id="Genre" name="Genre">
                    @foreach (var opt in Model.Genres) {
                        <a  asp-action="GroupMovies" value="@opt">@opt</a>
                    }
                </div>

        </div>

    
    <br />
    <br />
    <div style="width: 67.5rem;" class="text-center">
        <ul>
            @foreach (var item in Model.Movies)
            {
                <div class="card text-center" style="width: 16rem; display:inline-block; margin: 3px">
                    <img class="card-img-top" src="@item.Image" alt="Product image cap">
                    <div class="card-body">
                        <div class="row d-flex justify-content-between">
                            <h5 class="card-title" style="color: #37474F">@item.Name</h5>
                            
                            @if (SignInManager.IsSignedIn(User))
                            {
                                <p class="card-text">
                                    <a class="btn" style="border: 0;" asp-action="AddToFavourites"
                                       asp-controller="Movies"
                                       asp-route-id="@item.Id">
                                       <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-heart-fill" viewBox="0 0 16 16">
                                          <path d="M2 15.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v13.5zM8 4.41c1.387-1.425 4.854 1.07 0 4.277C3.146 5.48 6.613 2.986 8 4.412z"/>
                                        </svg>
                                   </a>
                                </p>
                            }
                        </div>
                        @if (!User.IsInRole("Admin"))
                        {
                            <p class="card-text" style="color: #37474F">@item.Description</p>
                        }

                        @if (SignInManager.IsSignedIn(User))
                            {
                                <p class="row card-text">
                                    <a class="btn col-12" style="background-color: #6A856C; color: white" asp-action="Details" asp-route-id="@item.Id">Details</a> 
                                </p>
                            }


                        @if (User.IsInRole("Admin"))
                        {
                            <p class="row card-text d-flex justify-content-between">
                                <a class="btn col-5" style="background-color: #ECAE8C; color: white" asp-action="Edit" asp-route-id="@item.Id">Edit</a> 
                                <a class="btn col-5 btn-danger" asp-action="Delete" asp-route-id="@item.Id">Delete</a>
                            </p>
                        }

                    </div>
                </div>
            }
        </ul>

    </div>

}
