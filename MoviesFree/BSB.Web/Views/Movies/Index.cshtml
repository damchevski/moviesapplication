@model IEnumerable<BSB.Data.Entity.Movie>

@using Microsoft.AspNetCore.Identity
@inject SignInManager<BSB.Data.Entity.MAUser> SignInManager
@inject UserManager<BSB.Data.Entity.MAUser> UserManager

@{
    ViewData["Title"] = "Index";
}

<style>
body { min-height: 100vh; background: linear-gradient(rgba(247, 245, 236,0.9), rgba(247, 245, 236, 0.9)), url("/images/background.png"); background-size: 100% 100%; background-repeat: no-repeat; }

    .cus-select {
        background-color: #ECAE8C;
        color: white;
    }

</style>


<div class="container text-center">

    
        <div class="controls d-flex justify-content-between align-items-center" style="width: 67.5rem">
            <div class="container">

                <form asp-controller="Movies" asp-action="Index">
                    <div class="m-2 text-center">
                        <div style="display: inline-block">
                            <input style="width: 200px;"
                                   placeholder="Movie Name"
                                   class="form-control"
                                   type="text" name="SearchString" />
                        </div>
                        <div style="display: inline-block" class="ml-2">
                            <input class="btn" style="border-color: #6A856C"
                                   type="submit" value="Filter" />
                        </div>
                        <br />
                    </div>
                </form>

            </div>
            <div class="container">

                @if (User.IsInRole("Admin"))
                {
                    <a class="btn"  style="background-color: #ECAE8C; color: white; border: 1px;" asp-action="Create">
                        Add Movie
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square-fill" viewBox="0 0 16 16">
                          <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z"/>
                        </svg>
                    </a>
                }
                <br />
            </div>
           
        </div>


        <br />
        <div style="width: 67.5rem">
            @foreach (var item in Model)
            {
                <div class="card text-center" style="width: 16rem; display:inline-block; margin: 3px">
                    <img class="card-img-top" src="@item.Image" alt="Product image cap">
                    <div class="card-body">
                        <div class="row d-flex justify-content-between">
                            <h5 class="card-title" style="color: #37474F">@item.Name</h5>
                            
                            @if (SignInManager.IsSignedIn(User))
                            {
                                <p class="card-text">
                                    <a class="btn" style="border: 0;" asp-action="AddToFavourites"
                                       asp-controller="Movies"
                                       asp-route-id="@item.Id">
                                       <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-heart-fill" viewBox="0 0 16 16">
                                          <path d="M2 15.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v13.5zM8 4.41c1.387-1.425 4.854 1.07 0 4.277C3.146 5.48 6.613 2.986 8 4.412z"/>
                                        </svg>
                                   </a>
                                </p>
                            }
                        </div>
                        @if (!User.IsInRole("Admin"))
                        {
                            <p class="card-text" style="color: #37474F">@item.Description</p>
                        }

                        @if (SignInManager.IsSignedIn(User))
                            {
                                <p class="row card-text">
                                    <a class="btn col-12" style="background-color: #6A856C; color: white" asp-action="Details" asp-route-id="@item.Id">Details</a> 
                                </p>
                            }


                        @if (User.IsInRole("Admin"))
                        {
                            <p class="row card-text d-flex justify-content-between">
                                <a class="btn col-5" style="background-color: #ECAE8C; color: white" asp-action="Edit" asp-route-id="@item.Id">Edit</a> 
                                <a class="btn col-5 btn-danger" asp-action="Delete" asp-route-id="@item.Id">Delete</a>
                            </p>
                        }

                    </div>
                </div>
            }
        </div>



</div>

