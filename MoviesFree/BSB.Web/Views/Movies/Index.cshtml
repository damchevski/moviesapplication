@model IEnumerable<BSB.Data.Entity.Movie>

@using Microsoft.AspNetCore.Identity
@inject SignInManager<BSB.Data.Entity.MAUser> SignInManager
@inject UserManager<BSB.Data.Entity.MAUser> UserManager

@{
    ViewData["Title"] = "Index";
}


<div class="container text-center">

    
        <div class="controls" style="width: 67.5rem">

            <div class="container">
                @if (SignInManager.IsSignedIn(User))
                {
                    <a class="btn btn-primary" style="display: inline-block" asp-action="GroupMovies">Group Movies into Genres</a>
                }

                @if (User.IsInRole("Admin"))
                {
                    <a class="btn btn-primary" style="display: inline-block" asp-action="Create">Create Movie</a>
                }
                <br />
            </div>

            <div class="container text-center">

                <form asp-controller="Movies" asp-action="Index">
                    <div class="m-2 text-center">
                        <div style="display: inline-block">
                            <input style="width: 200px;"
                                   placeholder="Movie Name"
                                   class="form-control"
                                   type="text" name="SearchString" />
                        </div>
                        <div style="display: inline-block" class="ml-2">
                            <input class="btn btn-outline-primary"
                                   type="submit" value="Filter" />
                        </div>
                        <br />
                    </div>
                </form>

            </div>

            <div class="container text-center">
                <a class="btn btn-primary" style="display: inline-block" asp-action="Index">All Movies</a>
              
            </div>
        </div>


        <br />
        <div style="width: 67.5rem">
            @foreach (var item in Model)
            {
                <div class="card text-center" style="width: 16rem; display:inline-block; margin: 3px">
                    <img class="card-img-top" src="@item.Image" alt="Product image cap">
                    <div class="card-body">
                        <h5 class="card-title">@item.Name</h5>
                        <p class="card-text">Movie Genre: @item.Genre</p>


                        @if (SignInManager.IsSignedIn(User))
                        {
                            <p class="card-text">
                                <a class="btn btn-outline-primary" asp-action="AddToFavourites"
                                   asp-controller="Movies"
                                   asp-route-id="@item.Id">Add To Favourites</a>
                            </p>
                        }

                        @if (User.IsInRole("Admin"))
                        {
                            <p class="card-text">
                                <a class="btn btn-primary" asp-action="Edit" asp-route-id="@item.Id">Edit</a> |
                                <a class="btn btn-primary" asp-action="Details" asp-route-id="@item.Id">Details</a> |
                                <a class="btn btn-danger" asp-action="Delete" asp-route-id="@item.Id">Delete</a>
                            </p>
                        }

                    </div>
                </div>
            }
        </div>



</div>

